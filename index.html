<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>icon platform-icon-library</title>
    
    <script type="importmap">
{
    "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        
        "react/jsx-runtime": "https://esm.sh/react@18.2.0/jsx-runtime",
        "platform-icon-library": "https://unpkg.com/platform-icon-library@latest/dist/index.mjs"
    }
}
    </script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; padding: 2rem; background-color: #f4f7f9; }
        .container { max-width: 1000px; margin: 0 auto; background: #fff; padding: 2rem; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        h1 { text-align: center; border-bottom: 2px solid #eee; padding-bottom: 1rem; margin-bottom: 1rem; }
        .search-bar {
            width: 100%;
            max-width: 400px;
            margin: 0 auto 2rem auto;
            display: block;
            padding: 10px 15px;
            font-size: 16px;
            border-radius: 6px;
            border: 1px solid #ccc;
            box-sizing: border-box;
            outline-offset: 2px;
            transition: border-color 0.3s ease;
        }
        .search-bar:focus {
            border-color: #0078d4;
            box-shadow: 0 0 5px rgba(0,120,212,0.5);
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill,minmax(180px,1fr));
            gap: 1.5rem;
        }
        .card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: default;
            user-select: none;
            position: relative;
            overflow: visible;
            transition: transform 0.2s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            transform: scale(1.2);
            z-index: 5;
        }
        .animation-container {
            width: 150px;
            height: 150px;
            margin-bottom: 0.75rem;
            pointer-events: auto;
            position: relative;
            z-index: 1;
            transition: transform 0.2s ease;
        }
        .animation-name {
            font-weight: 600;
            font-size: 14px;
            color: #0078d4;
            text-align: center;
            cursor: pointer;
            user-select: text;
            word-break: break-word;
            padding: 4px 8px;
            border-radius: 6px;
            transition: background-color 0.2s ease;
        }
        .animation-name:hover {
            background-color: #e6f0fa;
        }
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 9999;
        }
        .toast.show {
            opacity: 1;
            pointer-events: auto;
        }
        .badge {
            position: absolute;
            top: 8px;
            left: 8px;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            color: #fff;
            font-weight: 600;
            letter-spacing: 0.2px;
            user-select: none;
            z-index: 3;
            pointer-events: none;
        }
        .badge.android {
            background-color: #3ddc84;
            color: #fff;
        }
        .badge.ios {
            background-color: #121216;
        }
    </style>
</head>
<body>
    <section class="mx-auto mb-8 max-w-5xl rounded-xl border border-gray-200 bg-white p-6 shadow-sm">
        <h2 style="margin-top:0;">📦 NPM 설치 방법</h2>
        <pre style="background:#f4f4f4;padding:10px;border-radius:6px;overflow-x:auto;">npm install platform-icon-library</pre>
        <h2>💡 사용 예제</h2>
        <pre style="background:#f4f4f4;padding:10px;border-radius:6px;overflow-x:auto;">
import { AccountLightActive } from 'platform-icon-library';
import React from 'react';

export default function Example() {
  return &lt;AccountLightActive size={48} color="#2563eb" strokeWidth={1.5} title="Account" /&gt;;
}
        </pre>
    </section>
    <div id="root"></div>

    <script type="module">
        import React from 'react';
        import ReactDOM from 'react-dom/client';
        import * as AllIcons from 'platform-icon-library';

        const ANDROID_NAMES = new Set([
            'InfoBlackvueLightAndroidWifiConnectManuallyLottie',
            'InfoBlackvueLightAndroidWifiDisconnectManuallyLottie',
        ]);
        const IOS_NAMES = new Set([
            'InfoBlackvueLightIosWifiConnectManuallyLottie',
            'InfoBlackvueLightIosWifiDisconnectManuallyLottie',
        ]);

        function Toast({ message, show }) {
            return React.createElement(
                'div',
                { className: 'toast' + (show ? ' show' : '') },
                message
            );
        }

        function Card({ name, Component, onCopy, mode, resetTick }) {
            const isDark = name.toLowerCase().includes('dark');
            const isLight = name.toLowerCase().includes('light');
            let platform = null;
            if (ANDROID_NAMES.has(name)) platform = 'android';
            else if (IOS_NAMES.has(name)) platform = 'ios';

            // Patch 1: isFixed always false
            const isFixed = false;

            // Patch 2: default states
            const [iconSize, setIconSize] = React.useState(32);
            const [iconColor, setIconColor] = React.useState('#0095E0');

            // Patch 3: new useEffect block for reset
            React.useEffect(() => {
                // Reset to defaults when mode changes or Reset pressed
                setIconSize(32);
                if (mode === 'BlackVue') setIconColor('#0095E0');
                else if (mode === 'FLEETA') setIconColor('#61007d');
                else setIconColor('#6e6e68');
            }, [mode, resetTick]);

            // Patch 4: effectiveColor is just iconColor
            const effectiveColor = iconColor;

            // Patch 5: snippet definition
            const snippet = `<${name} size={${iconSize}} color="${iconColor}" strokeWidth={1.5} />`;

            const containerRef = React.useRef(null);

            return React.createElement(
                'div',
                { className: 'group rounded-xl border border-gray-200 bg-white p-4 shadow-sm transition hover:shadow-md flex flex-col items-center' },
                platform === 'android' && React.createElement('div', { className: 'badge android absolute top-2 left-2 rounded-full px-2 py-0.5 text-xs font-semibold' }, 'Android'),
                platform === 'ios' && React.createElement('div', { className: 'badge ios absolute top-2 left-2 rounded-full px-2 py-0.5 text-xs font-semibold' }, 'iOS'),
                // Removed Fixed badge
                React.createElement(
                    'div',
                    {
                        className: 'animation-container flex items-center justify-center rounded-md border border-gray-100',
                        ref: containerRef,
                        style: {
                            width: iconSize,
                            height: iconSize,
                            backgroundColor: isDark ? '#121216' : (isLight ? '#ffffff' : undefined)
                        }
                    },
                    React.createElement(Component, { size: iconSize, color: effectiveColor, strokeWidth: 1.5 })
                ),
                React.createElement(
                    'div',
                    {
                        className: 'animation-name mt-2 cursor-pointer rounded px-2 py-1 text-sm font-medium text-blue-600 hover:bg-blue-50',
                        onClick: () => onCopy(snippet),
                        title: '클릭하여 사용 코드 복사',
                        tabIndex: 0,
                        onKeyDown: (e) => {
                            if (e.key === 'Enter' || e.key === ' ') {
                                e.preventDefault();
                                onCopy(snippet);
                            }
                        }
                    },
                    name
                ),
                React.createElement(
                    'div',
                    { style: { marginTop: '8px', display: 'flex', gap: '8px', justifyContent: 'center', width: '100%' } },
                    // Size label with range input and value display
                    React.createElement(
                        'label',
                        { style: { fontSize: '12px', display: 'flex', flexDirection: 'column', alignItems: 'center', flex: '1' } },
                        'Size',
                        React.createElement('input', {
                            type: 'range',
                            value: iconSize,
                            min: 16,
                            max: 128,
                            step: 4,
                            onChange: e => setIconSize(Number(e.target.value)),
                            style: { marginTop: '4px' },
                            className: 'w-full'
                        }),
                        React.createElement('input', {
                            type: 'number',
                            value: iconSize,
                            min: 16,
                            max: 128,
                            step: 4,
                            onChange: e => setIconSize(Math.max(16, Math.min(128, Number(e.target.value)))) ,
                            style: { marginTop: '4px', textAlign: 'center' },
                            className: 'w-20 rounded-md border border-gray-300 px-2 py-1 text-sm text-center shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500'
                        }),
                    ),
                    React.createElement(
                        'label',
                        { style: { fontSize: '12px', display: 'flex', flexDirection: 'column', alignItems: 'center', flex: '1' } },
                        'Color',
                        React.createElement('input', {
                            type: 'color',
                            value: iconColor,
                            onChange: e => setIconColor(e.target.value),
                            // Patch 6: Remove disabled and always opacity 1
                            style: { width: '60px', height: '28px', padding: '0', border: 'none', marginTop: '4px', cursor: 'pointer', opacity: 1 },
                            className: 'rounded border border-gray-300'
                        }),
                        React.createElement('button', {
                            onClick: () => {
                                const el = containerRef.current && containerRef.current.querySelector('svg');
                                if (!el) return;
                                const clone = el.cloneNode(true);
                                // ensure xmlns and size
                                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
                                clone.setAttribute('width', String(iconSize));
                                clone.setAttribute('height', String(iconSize));
                                // color is already applied via props; ensure strokeWidth
                                clone.setAttribute('stroke-width', String(1.5));
                                const serialized = new XMLSerializer().serializeToString(clone);
                                const blob = new Blob([serialized], { type: 'image/svg+xml;charset=utf-8' });
                                const url = URL.createObjectURL(blob);
                                const a = document.createElement('a');
                                a.href = url;
                                a.download = `${name}-${iconSize}.svg`;
                                document.body.appendChild(a);
                                a.click();
                                a.remove();
                                URL.revokeObjectURL(url);
                            },
                            className: 'inline-flex items-center rounded-md border px-3 py-1.5 text-sm hover:bg-gray-50',
                            title: '다운로드',
                            'aria-label': 'SVG 다운로드'
                        }, 'SVG')
                    )
                )
            );
        }

        function App() {
            const allNames = React.useMemo(() => Object.keys(AllIcons), []);
            const [searchTerm, setSearchTerm] = React.useState('');
            const [toastVisible, setToastVisible] = React.useState(false);
            const [toastMessage, setToastMessage] = React.useState('');
            const [mode, setMode] = React.useState('BlackVue');
            const [resetTick, setResetTick] = React.useState(0);

            const filteredNames = React.useMemo(() => {
                const lowerSearch = searchTerm.toLowerCase();
                return allNames.filter(name => name.toLowerCase().includes(lowerSearch));
            }, [searchTerm, allNames]);

            const handleCopy = (text) => {
                navigator.clipboard.writeText(text).then(() => {
                    setToastMessage(`"${text}" 복사됨`);
                    setToastVisible(true);
                    setTimeout(() => setToastVisible(false), 2000);
                }).catch(() => {
                    setToastMessage('복사에 실패했습니다');
                    setToastVisible(true);
                    setTimeout(() => setToastVisible(false), 2000);
                });
            };

            return React.createElement(
                'div',
                { className: 'mx-auto max-w-5xl rounded-xl border border-gray-200 bg-white p-6 shadow-sm' },
                React.createElement('h1', { className: 'mb-4 border-b border-gray-100 pb-4 text-center text-2xl font-semibold' }, 'Platform Icon Library'),
                React.createElement('div', { style: { display: 'flex', justifyContent: 'center', gap: '12px', marginBottom: '12px' } },
                  // Removed Mode: label
                  React.createElement('button', {
                    onClick: () => setMode('BlackVue'),
                    className: 'inline-flex items-center rounded-md border px-3 py-1.5 text-sm hover:bg-gray-50',
                    style: { background: mode==='BlackVue' ? '#e6f0fa' : '#fff', cursor: 'pointer' }
                  }, 'BlackVue'),
                  React.createElement('button', {
                    onClick: () => setMode('FLEETA'),
                    className: 'inline-flex items-center rounded-md border px-3 py-1.5 text-sm hover:bg-gray-50',
                    style: { background: mode==='FLEETA' ? '#e6f0fa' : '#fff', cursor: 'pointer' }
                  }, 'FLEETA'),
                  React.createElement('button', {
                    onClick: () => setMode('Custom'),
                    className: 'inline-flex items-center rounded-md border px-3 py-1.5 text-sm hover:bg-gray-50',
                    style: { background: mode==='Custom' ? '#e6f0fa' : '#fff', cursor: 'pointer' }
                  }, 'Custom'),
                  React.createElement('button', {
                    onClick: () => { setMode('BlackVue'); setResetTick(t => t + 1); },
                    className: 'inline-flex items-center rounded-md border px-3 py-1.5 text-sm hover:bg-gray-50 ml-4',
                    style: { background: '#fff', cursor: 'pointer' }
                  }, 'Reset')
                ),
                React.createElement('input', {
                    type: 'search',
                    className: 'mb-8 block w-full max-w-md mx-auto rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500',
                    placeholder: '애니메이션 이름 검색...',
                    value: searchTerm,
                    onChange: e => setSearchTerm(e.target.value),
                    'aria-label': '애니메이션 이름 검색'
                }),
                React.createElement(
                    'div',
                    { className: 'grid grid-cols-[repeat(auto-fill,minmax(180px,1fr))] gap-6' },
                    filteredNames.map(name => {
                        const Component = AllIcons[name];
                        return React.createElement(Card, { key: name, name, Component, onCopy: handleCopy, mode, resetTick });
                    })
                ),
                React.createElement(Toast, { message: toastMessage, show: toastVisible })
            );
        }

        const rootElement = document.getElementById('root');
        const root = ReactDOM.createRoot(rootElement);
        root.render(React.createElement(App));
    </script>
</body>
</html>